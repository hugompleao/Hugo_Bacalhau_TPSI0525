{"level":"info","message":"[mb:2525] mountebank v2.9.2 now taking orders - point your browser to http://localhost:2525/ for help","timestamp":"2025-10-27T15:16:25.223Z"}
{"level":"info","message":"[mb:2525] GET /images/book.jpg","timestamp":"2025-10-27T15:16:32.939Z"}
{"level":"info","message":"[mb:2525] GET /images/book.jpg","timestamp":"2025-10-27T15:16:37.446Z"}
{"level":"info","message":"[mb:2525] POST /imposters","timestamp":"2025-10-27T15:16:40.976Z"}
{"level":"error","message":"[mb:2525] Invalid JSON: {\r\n    \"port\": 4546,\r\n    \"protocol\": \"http\",\r\n    \"name\": \"Gestão de Armazem\",\r\n    \"stubs\": [\r\n\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"POST\", \"path\": \"/api/produtos\" } },\r\n                { \"equals\": { \"headers\": { \"Content-Type\": \"application/json\" } } },\r\n                { \"matches\": { \"body\": {\"nome\":\"Manteiga\", \"preco\":\"2€\", \"quantidade\":\"4\"} } }\r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 201,\r\n                        \"headers\": { \"Content-Type\": \"application/json\" },\r\n                        \"body\": {\r\n                            \"status\": \"Válido\",\r\n                            \"message\": \"Produto adicionado com sucesso\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"POST\", \"path\": \"/api/produtos\" } },\r\n                { \"equals\": { \"body\": { \"nome\":\"Manteiga\", \"preco\":\"2€\", \"quantidade\":\"0\" } } }\r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 400,\r\n                        \"headers\": { \"Content-Type\": \"application/json\" },\r\n                        \"body\": {\r\n                            \"error\": \"Erro\",\r\n                            \"message\": \"Valor de stock inválido\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"PUT\", \"path\": \"/api/produtos\" } },\r\n                { \"equals\": { \"headers\": { \"Content-Type\": \"application/json\" } } }\r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 200,\r\n                        \"headers\": {\r\n                            \"Content-Type\": \"application/json\",\r\n                            \"Location\": \"/api/produtos/1\"\r\n                        },\r\n                        \"body\": {\r\n                            \"status\": \"Válido\",\r\n                            \"message\": \"Produto atualizado com sucesso.\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"DELETE\", \"path\": \"/api/produtos\" } },\r\n                { \"equals\": { \"headers\": { \"Content-Type\": \"application/json\" } } },\r\n                { \"matches\": { \"body\": \"\\\"quantidade\\\"\\\\s*:\\\\s*0\" } }\r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 200,\r\n                        \"headers\": { \"Content-Type\": \"application/json\" },\r\n                        \"body\": {\r\n                            \"status\": \"Válido\",\r\n                            \"message\": \"Produto eliminado com sucesso\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"DELETE\", \"path\": \"/api/produtos\" } },\r\n                { \"equals\": { \"headers\": { \"Content-Type\": \"application/json\" } } },\r\n                { \"matches\": { \"body\": \"\\\"quantidade\\\"\\\\s*:\\\\s*[1]\" } }\r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 409,\r\n                        \"headers\": { \"Content-Type\": \"application/json\" },\r\n                        \"body\": {\r\n                            \"error\": \"Recusado\",\r\n                            \"message\": \"Produto com stock existente\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}","timestamp":"2025-10-27T15:16:40.978Z"}
{"level":"info","message":"[mb:2525] POST /imposters","timestamp":"2025-10-27T15:18:07.525Z"}
{"level":"error","message":"[mb:2525] Invalid JSON: {\r\n    \"port\": 4546,\r\n    \"protocol\": \"http\",\r\n    \"name\": \"Gestão de Inventário de Produtos\",\r\n    \"stubs\": [\r\n        \r\n        \r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"DELETE\", \"path\": \"/api/produtos/101\" } } \r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 409, \r\n                        \"headers\": { \"Content-Type\": \"application/json\" },\r\n                        \"body\": {\r\n                            \"error\": \"Conflito de Regra\",\r\n                            \"message\": \"A remoção falhou: o stock não é zero.\"\r\n                        }\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n        \r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"POST\", \"path\": \"/api/produtos\" } },\r\n                { \"jsonpath\": { \"selector\": \"$.quantidade\", \"lessThan\": 0 } }\r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 400,\r\n                        \"headers\": { \"Content-Type\": \"application/json\" },\r\n                        \"body\": { \"erro\": \"Valor inválido\" } \r\n                    }\r\n                }\r\n            ]\r\n        },\r\n\r\n\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"GET\", \"path\": \"/api/produtos/999\" } }\r\n            ],\r\n            \"responses\": [\r\n                { \"is\": { \"statusCode\": 404, \"body\": { \"erro\": \"Produto inexistente\" } } }\r\n            ]\r\n        },\r\n        \r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"PUT\", \"path\": \"/api/produtos/999/stock\" } }\r\n            ],\r\n            \"responses\": [\r\n                { \"is\": { \"statusCode\": 404, \"body\": { \"erro\": \"Produto inexistente\" } } }\r\n            ]\r\n        },\r\n        \r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"DELETE\", \"path\": \"/api/produtos/999\" } }\r\n            ],\r\n            \"responses\": [\r\n                { \"is\": { \"statusCode\": 404, \"body\": { \"erro\": \"Produto inexistente\" } } }\r\n            ]\r\n        },\r\n\r\n\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"DELETE\", \"path\": \"/api/produtos/102\" } }\r\n            ],\r\n            \"responses\": [\r\n                { \"is\": { \"statusCode\": 200, \"body\": { \"mensagem\": \"Produto 102 removido com sucesso.\" } } }\r\n            ]\r\n        },\r\n\r\n        {\r\n            \"predicates\": [\r\n                { \"matches\": { \"method\": \"PUT\", \"path\": \"^/api/produtos/\\\\d+/stock$\" } } // Corresponde a qualquer ID\r\n            ],\r\n            \"responses\": [\r\n                { \"is\": { \"statusCode\": 200, \"body\": { \"id\": 101, \"mensagem\": \"Stock atualizado (simulação: +5 unidades).\" } } }\r\n            ]\r\n        },\r\n        \r\n        {\r\n            \"predicates\": [\r\n                { \"matches\": { \"method\": \"GET\", \"path\": \"^/api/produtos/\\\\d+$\" } } // Corresponde a qualquer ID\r\n            ],\r\n            \"responses\": [\r\n                { \"is\": { \"statusCode\": 200, \"body\": { \"id\": 101, \"nome\": \"Caneta\", \"preco\": 1.50, \"quantidade\": 25 } } }\r\n            ]\r\n        },\r\n\r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"POST\", \"path\": \"/api/produtos\" } }\r\n            ],\r\n            \"responses\": [\r\n                { \"is\": { \"statusCode\": 201, \"body\": { \"id\": 103, \"nome\": \"Novo Item\", \"preco\": 10.00, \"quantidade\": 1 } } }\r\n            ]\r\n        },\r\n\r\n        \r\n        {\r\n            \"predicates\": [\r\n                { \"equals\": { \"method\": \"GET\", \"path\": \"/api/produtos\" } }\r\n            ],\r\n            \"responses\": [\r\n                {\r\n                    \"is\": {\r\n                        \"statusCode\": 200,\r\n                        \"body\": [\r\n                            { \"id\": 101, \"nome\": \"Caneta A\", \"quantidade\": 25 },\r\n                            { \"id\": 102, \"nome\": \"Caderno B\", \"quantidade\": 0 }\r\n                        ]\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}","timestamp":"2025-10-27T15:18:07.527Z"}
{"level":"info","message":"[mb:2525] POST /imposters","timestamp":"2025-10-27T15:23:55.059Z"}
{"level":"error","message":"[mb:2525] error creating imposter: [{\"code\":\"bad data\",\"message\":\"missing predicate\",\"source\":{\"jsonpath\":{\"selector\":\"$.quantidade\",\"lessThan\":0}}}]","timestamp":"2025-10-27T15:23:55.067Z"}
{"level":"info","message":"[mb:2525] POST /imposters","timestamp":"2025-10-27T15:25:55.825Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] Open for business...","timestamp":"2025-10-27T15:25:55.836Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:53563 => GET /api/produtos","timestamp":"2025-10-27T15:31:45.045Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:50167 => GET /api/produtos","timestamp":"2025-10-27T15:32:32.630Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:50168 => GET /api/produtos/101","timestamp":"2025-10-27T15:32:39.791Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:64439 => GET /api/produtos/999","timestamp":"2025-10-27T15:34:14.610Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:64440 => POST /api/produtos","timestamp":"2025-10-27T15:34:18.812Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:50941 => POST /api/produtos","timestamp":"2025-10-27T15:34:29.742Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:61669 => POST /api/produtos","timestamp":"2025-10-27T15:35:33.132Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:61670 => PUT /api/produtos/101/stock","timestamp":"2025-10-27T15:35:47.956Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:52826 => PUT /api/produtos/999/stock","timestamp":"2025-10-27T15:35:59.255Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:52830 => DELETE /api/produtos/101","timestamp":"2025-10-27T15:36:12.295Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:65312 => DELETE /api/produtos/102","timestamp":"2025-10-27T15:36:22.748Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:65313 => DELETE /api/produtos/999","timestamp":"2025-10-27T15:36:31.107Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:50684 => POST /api/produtos","timestamp":"2025-10-27T15:48:17.921Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:58121 => GET /api/produtos","timestamp":"2025-10-27T15:52:24.049Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:64344 => GET /api/produtos","timestamp":"2025-10-27T15:53:34.658Z"}
{"level":"info","message":"[http:4546 Gestão de Inventário de Produtos] ::ffff:127.0.0.1:55457 => GET /api/produtos","timestamp":"2025-10-27T15:54:16.724Z"}
